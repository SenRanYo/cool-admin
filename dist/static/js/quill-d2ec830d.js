import{Q as b}from"./quill-992d0499.js";import{t as x}from"./index-e77a39a7.js";import{u as C}from"./index-8d3b4b42.js";import{d as h,p as k,e as V,W as q,o as y,c as H,a as w,b as _}from"./@vue.runtime-core-3a9e54b6.js";import{r as g,u as d}from"./@vue.reactivity-747ae439.js";import{o as M}from"./@vue.shared-9aa0355e.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import"./chardet-ee49d9b4.js";import"./@vue.runtime-dom-7b7b8a44.js";import"./element-plus-aceaa6a8.js";import"./lodash-es-d00cf236.js";import"./@vueuse.core-b5ce6112.js";import"./@vueuse.shared-8ce56883.js";import"./@element-plus.icons-vue-e3809a99.js";import"./@popperjs.core-c75af06c.js";import"./@ctrl.tinycolor-384ef2e5.js";import"./dayjs-98968027.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui.dom-a30dd394.js";import"./@floating-ui.core-a4bcb9d9.js";import"./monaco-editor-9ddaeaf3.js";import"./store-4dd21bbb.js";import"./axios-aba6f0e0.js";import"./nprogress-d2c1a460.js";import"./mitt-b509fb6d.js";import"./vue-router-19ed6b98.js";import"./pinia-2b0aea45.js";import"./vue-demi-71ba0ef2.js";import"./vue-echarts-c84fbe77.js";import"./resize-detector-a5205554.js";import"./echarts-90e4e057.js";import"./tslib-54e39b60.js";import"./zrender-5c8f9fce.js";import"./mockjs-5923ee6a.js";import"./vue-1fcee0a5.js";const E=h({name:"cl-editor-quill"}),S=h({...E,props:{modelValue:null,options:Object,height:{type:[String,Number],default:400},disabled:Boolean},emits:["update:modelValue","load"],setup(m,{emit:p}){const i=m,{refs:c,setRefs:l}=C();let e=null;const n=g(""),a=g(0);function u(o){if(i.disabled)return!1;const t=e.getSelection();t&&(a.value=t.index),c[o].open()}function f(o){o.length>0&&(o.forEach((t,r)=>{["image","video"].includes(t.type)&&e.insertEmbed(a.value+r,t.type,t.url,b.sources.USER)}),e.setSelection(a.value+o.length))}function s(o){e.root.innerHTML=o||""}function v(){e.container.style.height=x(i.height)}return k(()=>i.modelValue,o=>{o?o!==n.value&&s(o):s("")}),V(function(){e=new b(c.editor,{theme:"snow",placeholder:"输入内容",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","video","image"]]},...i.options}),e.getModule("toolbar").addHandler("image",()=>{u("image")}),e.getModule("toolbar").addHandler("video",()=>{u("video")}),e.on("text-change",()=>{n.value=e.root.innerHTML,p("update:modelValue",n.value)}),s(i.modelValue),v(),e.enable(!i.disabled),p("load",e)}),(o,t)=>{const r=q("cl-upload-space");return y(),H("div",{class:M(["cl-editor-quill",{disabled:m.disabled}])},[w("div",{ref:d(l)("editor"),class:"editor"},null,512),_(r,{ref:d(l)("image"),accept:"image/*","show-btn":!1,onConfirm:f},null,512),_(r,{ref:d(l)("video"),accept:"video/*","show-btn":!1,onConfirm:f},null,512)],2)}}});const _e=B(S,[["__scopeId","data-v-60bcbf51"]]);export{_e as default};
