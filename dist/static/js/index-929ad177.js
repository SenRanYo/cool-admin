import{s as b}from"./store-4dd21bbb.js";import{D as y}from"./vuedraggable-7bc20794.js";import{o as B,B as C}from"./lodash-es-d00cf236.js";import{d as N,p as D,n as x,W as i,o as E,c as I,b as c,J as a,N as u,a as h,am as A,al as S}from"./@vue.runtime-core-3a9e54b6.js";import{r as V}from"./@vue.reactivity-747ae439.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{O as w}from"./@vue.shared-9aa0355e.js";import"./chardet-ee49d9b4.js";import"./sortablejs-97dc98f7.js";import"./@vue.runtime-dom-7b7b8a44.js";import"./vue-1fcee0a5.js";const U=N({name:"cl-column-custom",components:{Draggable:y},props:{name:String,columns:{type:Array,required:!0,default:()=>[]}},setup(o){const l=V(!1),m=`column-custom__${o.name||location.pathname}`,s=V([]);function _(){x(()=>{o.columns.forEach(t=>{var n;!t.type&&t.prop&&(t.hidden=!((n=s.value.find(e=>e.prop==t.prop))!=null&&n.checked),t.orderNum=s.value.findIndex(e=>e.prop==t.prop))})})}function v(){b.set(m,s.value),_(),p()}function r(){l.value=!0}function p(){l.value=!1}return D(()=>o.columns,t=>{if(t){const n=b.get(m);s.value=B(t.filter(e=>!e.type&&e.prop).map(e=>{var g;let d=!0,k=e.orderNum||0;return C(e.hidden)&&(d=!e.hidden),n&&(d=(g=n.find(f=>f.prop==e.prop))==null?void 0:g.checked,k=n.findIndex(f=>f.prop==e.prop)),{label:e.label,prop:e.prop,checked:d,orderNum:k}}),"orderNum","asc"),_()}}),{visible:l,list:s,open:r,close:p,save:v}}});const T=o=>(A("data-v-373486c5"),o=o(),S(),o),q={class:"cl-column-custom__wrap"},F={class:"cl-column-custom__dialog"},J={class:"left"},O=T(()=>h("div",{class:"right"},null,-1));function W(o,l,m,s,_,v){const r=i("el-button"),p=i("el-checkbox"),t=i("draggable"),n=i("cl-dialog");return E(),I("div",q,[c(r,{onClick:o.open},{default:a(()=>[u("自定义列")]),_:1},8,["onClick"]),c(n,{modelValue:o.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>o.visible=e),title:"自定义列"},{footer:a(()=>[c(r,{onClick:o.close},{default:a(()=>[u("取消")]),_:1},8,["onClick"]),c(r,{type:"success",onClick:o.save},{default:a(()=>[u("保存")]),_:1},8,["onClick"])]),default:a(()=>[h("div",F,[h("div",J,[c(t,{"item-key":"prop",modelValue:o.list,"onUpdate:modelValue":l[0]||(l[0]=e=>o.list=e)},{item:a(({element:e})=>[c(p,{border:"",modelValue:e.checked,"onUpdate:modelValue":d=>e.checked=d},{default:a(()=>[u(w(e.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),O])]),_:1},8,["modelValue"])])}const Y=$(U,[["render",W],["__scopeId","data-v-373486c5"]]);export{Y as default};
