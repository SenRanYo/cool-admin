"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue-demi"),t=require("echarts/core"),n=require("resize-detector"),o=function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)},r=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function i(e){return t=Object.create(null),r.forEach((function(n){t[n]=function(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,n)}}(n)})),t;var t}var u={autoresize:Boolean},a=/^on[^a-z]/,c=function(e){return a.test(e)};function s(t,n){var o=e.unref(t);return o&&"object"==typeof o&&"value"in o?o.value||n:o||n}var l={loading:Boolean,loadingOptions:Object},f=null;var p=function(){if(null!=f)return f;if("undefined"==typeof HTMLElement||"undefined"==typeof customElements)return f=!1;try{new Function("tag","class EChartsElement extends HTMLElement {\n  __dispose = null;\n\n  disconnectedCallback() {\n    if (this.__dispose) {\n      this.__dispose();\n      this.__dispose = null;\n    }\n  }\n}\n\nif (customElements.get(tag) == null) {\n  customElements.define(tag, EChartsElement);\n}\n")("x-vue-echarts")}catch(e){return f=!1}return f=!0}();e.Vue2&&e.Vue2.config.ignoredElements.push("x-vue-echarts");var v=e.defineComponent({name:"echarts",props:o(o({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},u),l),emits:{},inheritAttrs:!1,setup:function(r,u){var a=u.attrs,l=e.shallowRef(),f=e.shallowRef(),v=e.shallowRef(),d=e.inject("ecTheme",null),h=e.inject("ecInitOptions",null),g=e.inject("ecUpdateOptions",null),O=e.toRefs(r),m=O.autoresize,_=O.manualUpdate,E=O.loading,b=O.loadingOptions,x=e.computed((function(){return v.value||r.option||null})),j=e.computed((function(){return r.theme||s(d,{})})),w=e.computed((function(){return r.initOptions||s(h,{})})),y=e.computed((function(){return r.updateOptions||s(g,{})})),L=e.computed((function(){return function(e){var t={};for(var n in e)c(n)||(t[n]=e[n]);return t}(a)})),T=e.getCurrentInstance().proxy.$listeners;function z(n){if(l.value){var o=f.value=t.init(l.value,j.value,w.value);r.group&&(o.group=r.group);var i=T;i||(i={},Object.keys(a).filter((function(e){return 0===e.indexOf("on")&&e.length>2})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);"Once"===t.substring(t.length-4)&&(t="~".concat(t.substring(0,t.length-4))),i[t]=a[e]}))),Object.keys(i).forEach((function(e){var t=i[e];if(t){var n=e.toLowerCase();"~"===n.charAt(0)&&(n=n.substring(1),t.__once__=!0);var r=o;if(0===n.indexOf("zr:")&&(r=o.getZr(),n=n.substring(3)),t.__once__){delete t.__once__;var u=t;t=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];u.apply(void 0,e),r.off(n,t)}}r.on(n,t)}})),m.value?e.nextTick((function(){o&&!o.isDisposed()&&o.resize(),u()})):u()}function u(){var e=n||x.value;e&&o.setOption(e,y.value)}}function A(){f.value&&(f.value.dispose(),f.value=void 0)}var C=null;e.watch(_,(function(t){"function"==typeof C&&(C(),C=null),t||(C=e.watch((function(){return r.option}),(function(e,t){e&&(f.value?f.value.setOption(e,o({notMerge:e!==t},y.value)):z())}),{deep:!0}))}),{immediate:!0}),e.watch([j,w],(function(){A(),z()}),{deep:!0}),e.watchEffect((function(){r.group&&f.value&&(f.value.group=r.group)}));var I=i(f);return function(t,n,r){var i=e.inject("ecLoadingOptions",{}),u=e.computed((function(){return o(o({},s(i,{})),null==r?void 0:r.value)}));e.watchEffect((function(){var e=t.value;e&&(n.value?e.showLoading(u.value):e.hideLoading())}))}(f,E,b),function(o,r,i){var u=null;e.watch([i,o,r],(function(e,o,r){var i=e[0],a=e[1],c=e[2];i&&a&&c&&(u=t.throttle((function(){a.resize()}),100),n.addListener(i,u)),r((function(){u&&i&&n.removeListener(i,u)}))}))}(f,m,l),e.onMounted((function(){z()})),e.onBeforeUnmount((function(){p&&l.value?l.value.__dispose=A:A()})),o({chart:f,root:l,setOption:function(e,t){r.manualUpdate&&(v.value=e),f.value?f.value.setOption(e,t||{}):z(e)},nonEventAttrs:L},I)},render:function(){var t=e.Vue2?{attrs:this.nonEventAttrs}:o({},this.nonEventAttrs);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",e.h("x-vue-echarts",t)}});exports.INIT_OPTIONS_KEY="ecInitOptions",exports.LOADING_OPTIONS_KEY="ecLoadingOptions",exports.THEME_KEY="ecTheme",exports.UPDATE_OPTIONS_KEY="ecUpdateOptions",exports.default=v;
//# sourceMappingURL=index.cjs.min.js.map
