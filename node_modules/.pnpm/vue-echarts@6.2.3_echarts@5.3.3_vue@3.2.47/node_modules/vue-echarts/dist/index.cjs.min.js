"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue-demi"),t=require("echarts/core"),n=require("resize-detector"),r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function i(e){return t=Object.create(null),o.forEach((function(n){t[n]=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,n)}}(n)})),t;var t}var a={autoresize:Boolean};var u={loading:Boolean,loadingOptions:Object},c=/^on[^a-z]/,s=function(e){return c.test(e)};var l=[],p=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var a=l.indexOf(i);-1===a&&(a=l.push(i)-1,p[a]={}),n=p[a]&&p[a][r]?p[a][r]:p[a][r]=u()}else n=u();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function u(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),o=0;o<n.length;o++)e.setAttribute(n[o],t.attributes[n[o]]);var a="prepend"===r?"afterbegin":"beforeend";return i.insertAdjacentElement(a,e),e}}("x-vue-echarts{display:block;width:100%;height:100%}",{});e.Vue2&&e.Vue2.config.ignoredElements.push("x-vue-echarts");var f=e.defineComponent({name:"echarts",props:r(r({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},a),u),inheritAttrs:!1,setup:function(o,a){var u=a.attrs,c=e.shallowRef(),l=e.shallowRef(),p=e.shallowRef(),f=e.inject("ecTheme",null),v=e.inject("ecInitOptions",null),d=e.inject("ecUpdateOptions",null),h=e.toRefs(o),g=h.autoresize,O=h.manualUpdate,m=h.loading,b=h.loadingOptions,y=e.computed((function(){return p.value||o.option||null})),_=e.computed((function(){return o.theme||e.unref(f)||{}})),x=e.computed((function(){return o.initOptions||e.unref(v)||{}})),E=e.computed((function(){return o.updateOptions||e.unref(d)||{}})),j=e.computed((function(){return function(e){var t={};for(var n in e)s(n)||(t[n]=e[n]);return t}(u)})),w=e.getCurrentInstance().proxy.$listeners;function T(n){if(c.value){var r=l.value=t.init(c.value,_.value,x.value);o.group&&(r.group=o.group);var i=w;i||(i={},Object.keys(u).filter((function(e){return 0===e.indexOf("on")&&e.length>2})).forEach((function(e){var t=e.charAt(2).toLowerCase()+e.slice(3);"Once"===t.substring(t.length-4)&&(t="~".concat(t.substring(0,t.length-4))),i[t]=u[e]}))),Object.keys(i).forEach((function(e){var t=i[e];if(t){var n=e.toLowerCase();"~"===n.charAt(0)&&(n=n.substring(1),t.__once__=!0);var o=r;if(0===n.indexOf("zr:")&&(o=r.getZr(),n=n.substring(3)),t.__once__){delete t.__once__;var a=t;t=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];a.apply(void 0,e),o.off(n,t)}}o.on(n,t)}})),g.value?e.nextTick((function(){r&&!r.isDisposed()&&r.resize(),a()})):a()}function a(){var e=n||y.value;e&&r.setOption(e,E.value)}}function A(){l.value&&(l.value.dispose(),l.value=void 0)}var L=null;e.watch(O,(function(t){"function"==typeof L&&(L(),L=null),t||(L=e.watch((function(){return o.option}),(function(e,t){e&&(l.value?l.value.setOption(e,r({notMerge:e.value!==(null==t?void 0:t.value)},E.value)):T())}),{deep:!0}))}),{immediate:!0}),e.watch([_,x],(function(){A(),T()}),{deep:!0}),e.watchEffect((function(){o.group&&l.value&&(l.value.group=o.group)}));var z=i(l);return function(t,n,o){var i=e.inject("ecLoadingOptions",{}),a=e.computed((function(){return r(r({},e.unref(i)),null==o?void 0:o.value)}));e.watchEffect((function(){var e=t.value;e&&(n.value?e.showLoading(a.value):e.hideLoading())}))}(l,m,b),function(r,o,i){var a=null;e.watch([i,r,o],(function(e,r,o){var i=e[0],u=e[1],c=e[2];i&&u&&c&&(a=t.throttle((function(){u.resize()}),100),n.addListener(i,a)),o((function(){a&&i&&n.removeListener(i,a)}))}))}(l,g,c),e.onMounted((function(){T()})),e.onUnmounted(A),r({chart:l,root:c,setOption:function(e,t){o.manualUpdate&&(p.value=e),l.value?l.value.setOption(e,t||{}):T(e)},nonEventAttrs:j},z)},render:function(){var t=r({},this.nonEventAttrs);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",e.h("x-vue-echarts",t)}});exports.INIT_OPTIONS_KEY="ecInitOptions",exports.LOADING_OPTIONS_KEY="ecLoadingOptions",exports.THEME_KEY="ecTheme",exports.UPDATE_OPTIONS_KEY="ecUpdateOptions",exports.default=f;
//# sourceMappingURL=index.cjs.min.js.map
